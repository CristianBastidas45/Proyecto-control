	CBLOCK .50
	CONT_RS232
	DATO_RS232
	ENDC
#DEFINE SALIDA PORTC,3
#DEFINE ENTRADA PORTC,4
	
RS232_ESCRIBE
	MOVWF DATO_RS232
	MOVLW D'8'
	MOVWF CONT_RS232
	BCF SALIDA
	CALL RETARDO_100MICROS
ROTAR
	RRF DATO_RS232,F
	BTFSC STATUS,C
	GOTO ES_1
	BCF SALIDA 
	GOTO ESPERAR
ES_1
	BSF SALIDA 
ESPERAR
	CALL RETARDO_100MICROS
	DECFSZ CONT_RS232,F
	GOTO ROTAR
	BSF SALIDA
	CALL RETARDO_100MICROS
	CALL RETARDO_100MICROS
	RETURN
RS232_LEE
	MOVLW D'8'
	MOVWF CONT_RS232
ESPERAR_START
	BTFSC ENTRADA
	GOTO ESPERAR_START
	CALL RETARDO_150MICROS
LEER_BIT
	BTFSC ENTRADA
	GOTO LEE_1
	BCF STATUS,C
	GOTO ROTAR_LEIDO
LEE_1
	BSF STATUS,C
ROTAR_LEIDO
	RRF DATO_RS232,F
	CALL RETARDO_100MICROS
	DECFSZ CONT_RS232,F
	GOTO LEER_BIT
	CALL RETARDO_100MICROS
	CALL RETARDO_100MICROS
	MOVF DATO_RS232,W
	RETURN